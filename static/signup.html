<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="index.css">
    <title>SignUp</title>
  </head>
  <body>
    <div id="header">
      <img src="img/btn-logo-01.png" class="logo">
      <ul id="category">
        <li class="menu" id="item"><a href="#">女裝</a></li>
        <li class="menu" id="item"><a href="#">男裝</a></li>
        <li class="menu"><a href="#">配件</a></li>
      </ul>
      <button type="button" id="profilebutton" onclick="user('profile')"><img src="img/member.png" id="profile"></button>
      <button type="button" id="cartbutton"><img src="img/cart.png" id="cart"></button>
      <div id="search">
        <div id="line_1"></div>
        <input style="background-color:transparent;border:0px;width:50%;height:100%;" type="text" name="" value="">
        <button type="submit" id="searchbutton"><img src="img/search.png" id="searchimg"></button>
      </div>
    </div>
    <div id="line"></div>
    <div id="s_body">
      <h1>SignUp</h1>
        <label for="name">name:
          <input type="text" name="name" id="name"/><br>
        </label>
        <label for="email">email:
          <input type="text" name="email" id="email"/><br>
        </label>
        <label for="password">password:
          <input type="password" name="password" id="password"/><br><br>
        </label>
        <button id="native" onclick="native()">submit</button>
      <p id="demo"></p>
    </div>
    <div id="p_footer">
      <table align="center" style="width:100%" cellpadding="20">
        <tr>
          <td align="right" style="width:50%">
            <ul>
              <li class="footer" id="footeritem_1"><a href="#">關於 Stylish</a></li>
              <li class="footer" id="footeritem_2"><a href="#">服務條款</a></li>
              <li class="footer" id="footeritem_3"><a href="#">隱私政策</a></li>
              <li class="footer" id="footeritem_4"><a href="#">聯絡我們</a></li>
              <li class="footer"><a href="#">FAQ</a></li>
            </ul>
          </td>
          <td align="right" style="width:20%">
            <button type="button" style="float:left; margin:-35px 0 0 0;" id="facebookbutton"><img src="img/facebook.png" id="facebook"></button>
            <button type="button" style="float:left; margin:-35px 0 0 0;" id="twitterbutton"><img src="img/twitter.png" id="twitter"></button>
            <button type="button" style="float:left; margin:-35px 0 0 0;" id="linebutton"><img src="img/line.png" id="linee"></button>
          </td>
          <td align="left" style="width:30%">
            <p id="copyright" style="float:left; margin:0 0 0 -20%;">© 2018. All rights reserved.</p>
          </td>
        </tr>
      </table>
    </div>
    <script>
      function user(user){
        window.location = `http://3.16.251.196/${user}.html`;
      }

      function native(){
        var name     = document.getElementById('name').value;
        var email     = document.getElementById('email').value;
        var password  = document.getElementById('password').value;
        var data = JSON.stringify({"name": name,"email": email,"password": password});
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "api/1.0/user/signup");
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.onreadystatechange = function () {
          if(xhr.readyState === 4 && xhr.status === 200) {
            if (this.responseText == '此 email 已註冊過。'){
              document.getElementById('demo').innerText = this.responseText;
            }else{
              window.location = `http://3.16.251.196/profile.html`;
            }
          }
        };
        console.log(typeof(data));
        xhr.send(data);
      }
    </script>
  </body>
</html>

